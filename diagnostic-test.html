<!DOCTYPE html>
<html>
<head>
    <title>Reference Data Test</title>
</head>
<body>
    <h1>Reference Data Diagnostic Test</h1>
    <div id="output"></div>
    
    <!-- Load necessary scripts -->
    <script src="4011-ReferenceValues.js"></script>
    <script src="4011-StateManager.js"></script>
    
    <script>
        // Simple test function
        function testReferenceDataLoading() {
            const output = document.getElementById('output');
            let html = '<h2>Test Results:</h2>';
            
            // Test 1: Check if ReferenceValues exists
            html += '<h3>1. ReferenceValues Check:</h3>';
            if (window.TEUI && window.TEUI.ReferenceValues) {
                html += '✅ TEUI.ReferenceValues exists<br>';
                
                // Check specific standard
                const standard = 'OBC SB12 3.1.1.2.C4';
                if (window.TEUI.ReferenceValues[standard]) {
                    html += `✅ Standard "${standard}" exists<br>`;
                    
                    // Check d_53 value
                    const d53Value = window.TEUI.ReferenceValues[standard]['d_53'];
                    html += `✅ d_53 value: "${d53Value}"<br>`;
                } else {
                    html += `❌ Standard "${standard}" not found<br>`;
                }
            } else {
                html += '❌ TEUI.ReferenceValues not found<br>';
            }
            
            // Test 2: Check StateManager
            html += '<h3>2. StateManager Check:</h3>';
            if (window.TEUI && window.TEUI.StateManager) {
                html += '✅ StateManager exists<br>';
                
                // Test loadReferenceData function
                try {
                    window.TEUI.StateManager.setValue('d_13', 'OBC SB12 3.1.1.2.C4', 'user-modified');
                    window.TEUI.StateManager.loadReferenceData('OBC SB12 3.1.1.2.C4');
                    html += '✅ loadReferenceData() called successfully<br>';
                    
                    // Check if activeReferenceDataSet has d_53
                    const refValue = window.TEUI.StateManager.getReferenceValue('d_53');
                    html += `✅ getReferenceValue('d_53'): "${refValue}"<br>`;
                    
                } catch (error) {
                    html += `❌ Error testing StateManager: ${error.message}<br>`;
                }
            } else {
                html += '❌ StateManager not found<br>';
            }
            
            output.innerHTML = html;
        }
        
        // Run test when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait a moment for scripts to load
            setTimeout(testReferenceDataLoading, 100);
        });
    </script>
</body>
</html> 